---
title: SQLiteåŸºç¡€â€”Day2
tags:
  - Database
  - SQL
  - SQLite
id: '142'
categories:
  - - Sqlite
date: 2020-07-26 11:20:00
---

> SQLite æ˜¯ä¸€ä¸ªè½¯ä»¶åº“ï¼Œå®ç°äº†è‡ªç»™è‡ªè¶³çš„ã€æ— æœåŠ¡å™¨çš„ã€é›¶é…ç½®çš„ã€äº‹åŠ¡æ€§çš„ SQL æ•°æ®åº“å¼•æ“ã€‚SQLite æ˜¯åœ¨ä¸–ç•Œä¸Šæœ€å¹¿æ³›éƒ¨ç½²çš„ SQL æ•°æ®åº“å¼•æ“ã€‚
> 
> æœ¬ç¯‡æ˜¯è¯¥ç³»åˆ—æ•™ç¨‹çš„ç¬¬äºŒç¯‡ï¼Œæ–°æ¥çš„æœ‹å‹å¯ä»¥åœ¨æˆ‘çš„åšå®¢æœç´¢ç¬¬ä¸€ç¯‡ï¼Œä»å¤´å¼€å§‹çœ‹

ä¸Šç¯‡ä»‹ç»äº†Sqliteçš„åŸºæœ¬çŸ¥è¯†ï¼Œä»Šå¤©è¦å†™çš„éƒ¨åˆ†æ˜¯ï¼šè¡¨çš„æ“ä½œã€è¿ç®—ç¬¦ä»¥åŠè¡¨è¾¾å¼

## æ•°æ®è¡¨

### åˆ›å»ºæ•°æ®è¡¨

åˆ›å»ºè¯­å¥æ ¼å¼ï¼š

```
Create Table table_name(
    column1 datatype primary key,
    column2 datatype not null,
    column3 datatype not null
);
```

æˆ‘ä»¬æ¥åˆ›å»ºå¦‚ä¸‹çš„ç®€å•æ•°æ®è¡¨ï¼š

`CREATE TABLE` æ˜¯å‘Šè¯‰æ•°æ®åº“ç³»ç»Ÿåˆ›å»ºä¸€ä¸ªæ–°è¡¨çš„å…³é”®å­—ã€‚`CREATE TABLE` è¯­å¥åè·Ÿç€è¡¨çš„å”¯ä¸€çš„åç§°æˆ–æ ‡è¯†ã€‚æ‚¨ä¹Ÿå¯ä»¥é€‰æ‹©æŒ‡å®šå¸¦æœ‰ `table_name` çš„ `database_name`ã€‚

IDğŸ”‘

Name

Age

int

text

int

```
Create Table info(
     id int primary key,
     name text not null,
     age int not null
 );
```

å¯ä»¥ç”¨`.tables`æŸ¥çœ‹å½“å‰æ•°æ®åº“çš„æ‰€æœ‰è¡¨

![](http://img.varsion.cn/blog-img/2020/07/image-20191223160439789-1.png)

### Schemaä¿¡æ¯

`.schema`å¯ä»¥æŸ¥çœ‹æŸä¸ªè¡¨çš„å®Œæ•´ä¿¡æ¯:

![](http://img.varsion.cn/blog-img/2020/07/image-20191223160611909-1.png)

å› ä¸ºæ‰€æœ‰çš„**ç‚¹å‘½ä»¤**åªåœ¨ SQLite æç¤ºç¬¦ä¸­å¯ç”¨ï¼Œæ‰€ä»¥å½“æ‚¨è¿›è¡Œå¸¦æœ‰ SQLite çš„ç¼–ç¨‹æ—¶ï¼Œæ‚¨è¦ä½¿ç”¨ä¸‹é¢çš„å¸¦æœ‰ **`sqlite_master`** è¡¨çš„ `SELECT` è¯­å¥æ¥åˆ—å‡ºæ‰€æœ‰åœ¨æ•°æ®åº“ä¸­åˆ›å»ºçš„è¡¨ï¼š

```
select tbl_name from sqlite_master where type = 'table';
```

å‡è®¾åœ¨ testDB.db ä¸­å·²ç»å­˜åœ¨å”¯ä¸€çš„ info è¡¨ï¼Œåˆ™å°†äº§ç”Ÿä»¥ä¸‹ç»“æœï¼š

![](http://img.varsion.cn/blog-img/2020/07/image-20191223170607817-1.png)

æ‚¨å¯ä»¥åˆ—å‡ºå…³äºè¡¨çš„å®Œæ•´ä¿¡æ¯ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

```
select sql from sqlite_master where type = 'table' and tbl_name = 'info';
```

![image-20191223171249482](http://img.varsion.cn/blog-img/2020/07/image-20191223171249482-1.png)

### åˆ é™¤è¡¨

```
Drop table table_name;
```

ä¹Ÿå¯ä»¥

```
Drop table databaseName.tableName;
```

åˆ é™¤æŒ‡å®šæ•°æ®åº“çš„è¡¨

![image-20191223162306749](http://img.varsion.cn/blog-img/2020/07/image-20191223162306749-1.png)

**åŒæ—¶ï¼Œæ— æ³•åˆ é™¤å…³è”æ•°æ®åº“çš„è¡¨**

* * *

## è¿ç®—ç¬¦

è¿ç®—ç¬¦æ˜¯ä¸€ä¸ªä¿ç•™å­—æˆ–å­—ç¬¦ï¼Œä¸»è¦ç”¨äº SQLite è¯­å¥çš„ WHERE å­å¥ä¸­æ‰§è¡Œæ“ä½œï¼Œå¦‚æ¯”è¾ƒå’Œç®—æœ¯è¿ç®—ã€‚

### ç®—æ•°è¿ç®—ç¬¦

sqliteä¸€å…±æœ‰è¿™äº›ç®—æ•°è¿ç®—ç¬¦ `ï¼‹,ï¼,*,/,ï¼…`

![](http://img.varsion.cn/blog-img/2020/07/image-20191223181829939-1.png)

### æ¯”è¾ƒè¿ç®—ç¬¦

è¿ç®—ç¬¦

æè¿°

å®ä¾‹

==

æ£€æŸ¥ä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚

(a == b) ä¸ä¸ºçœŸã€‚

=

æ£€æŸ¥ä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚

(a = b) ä¸ä¸ºçœŸã€‚

!=

æ£€æŸ¥ä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚

(a != b) ä¸ºçœŸã€‚

<>

æ£€æŸ¥ä¸¤ä¸ªæ“ä½œæ•°çš„å€¼æ˜¯å¦ç›¸ç­‰ï¼Œå¦‚æœä¸ç›¸ç­‰åˆ™æ¡ä»¶ä¸ºçœŸã€‚

(a <> b) ä¸ºçœŸã€‚

>

æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å¤§äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚

(a > b) ä¸ä¸ºçœŸã€‚

<

æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å°äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚

(a < b) ä¸ºçœŸã€‚

>=

æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å¤§äºç­‰äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚

(a >= b) ä¸ä¸ºçœŸã€‚

<=

æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦å°äºç­‰äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚

(a <= b) ä¸ºçœŸã€‚

!<

æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦ä¸å°äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚

(a !< b) ä¸ºå‡ã€‚

!>

æ£€æŸ¥å·¦æ“ä½œæ•°çš„å€¼æ˜¯å¦ä¸å¤§äºå³æ“ä½œæ•°çš„å€¼ï¼Œå¦‚æœæ˜¯åˆ™æ¡ä»¶ä¸ºçœŸã€‚

(a !> b) ä¸ºçœŸã€‚

å‡è®¾å½“å‰è¡¨ä¸­æœ‰å¦‚ä¸‹è®°å½•

![](http://img.varsion.cn/blog-img/2020/07/13MFLZH75GSQLTIEJ.png)

```
select * from info where name = 'å……é¸­';
//ä»infoè¡¨ä¸­æ£€ç´¢name ä¸º å……é¸­ çš„è®°å½•
 select * from info where name = 'æ˜“å“’';
//ä»infoè¡¨ä¸­æ£€ç´¢name ä¸º  æ˜“å“’ çš„è®°å½• 
```

![](http://img.varsion.cn/blog-img/2020/07/image-1.png)

```
select * from info where id > 0;
//æŸ¥è¯¢idå¤§äº0çš„
```

![](http://img.varsion.cn/blog-img/2020/07/image-2.png)

* * *

## è¡¨è¾¾å¼

è¡¨è¾¾å¼æ˜¯ä¸€ä¸ªæˆ–å¤šä¸ªå€¼ã€è¿ç®—ç¬¦å’Œè®¡ç®—å€¼çš„SQLå‡½æ•°çš„ç»„åˆã€‚

### å¸ƒå°”è¡¨è¾¾å¼

SQLite çš„å¸ƒå°”è¡¨è¾¾å¼åœ¨åŒ¹é…å•ä¸ªå€¼çš„åŸºç¡€ä¸Šè·å–æ•°æ®ã€‚è¯­æ³•å¦‚ä¸‹ï¼š

```
select column1,column2  
from tableName  
where [condition];
```

å¸ƒå°”è¡¨è¾¾å¼å°±æ˜¯ `where`è¯­å¥çš„åˆ¤æ–­æ¡ä»¶ï¼Œå¸ƒå°”è¡¨è¾¾å¼çš„å€¼å°±æ˜¯`ture , false`

### æ•°å€¼è¡¨è¾¾å¼

```
select numExpression 
as 
name 
[from tableName where condition]
```

numExpression:æ˜¯æ•°å­¦è¡¨è¾¾å¼ æˆ– å…¬å¼

nameï¼šä½œä¸ºnameè¾“å‡º

![](http://img.varsion.cn/blog-img/2020/07/image-3.png)

å¸¸ç”¨å†…ç½®å‡½æ•°ï¼š

avg()ã€sum()ã€count()ï¼Œå¸¸ç”¨äºæ•°æ®è®¡ç®—

![](http://img.varsion.cn/blog-img/2020/07/image-4.png)

* * *